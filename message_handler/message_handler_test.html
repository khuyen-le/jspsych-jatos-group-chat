<!DOCTYPE html>
<html>
  <head>
    <title>Message Handler Test</title>

    <!-- Load jsPsych -->
    <script src="/Users/tuh20985/Desktop/jspsych_hackathon/jspsych/dist/jspsych.js"></script>

    <!-- Load jspsych plugins-->
    <script src="message_handler_basic.js"></script>

    <style>
        body {
  background-color: #FFFFFF;
       } 
  .jspsych-display-element {
  color: black;
  }
  .chat-container {
      width: 100%;
      max-width: 600px;
      background-color: white;
      border-radius: 12px;
      box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
      overflow: hidden;
      display: flex;
      flex-direction: column;
      height: 500px;
    }
    .chat-header {
      background-color: #4a6ee0;
      color: white;
      padding: 15px;
      font-weight: bold;
      font-size: 18px;
    }
    .chat-messages {
      flex: 1;
      overflow-y: auto;
      padding: 15px;
      display: flex;
      flex-direction: column;
    }
    .message {
      margin-bottom: 10px;
      max-width: 80%;
      padding: 10px 15px;
      border-radius: 18px;
      word-wrap: break-word;
    }
    .user-message {
      align-self: flex-end;
      background-color: #4a6ee0;
      color: white;
      border-bottom-right-radius: 4px;
    }
    .reply-message {
      align-self: flex-start;
      background-color: #e9e9eb;
      color: #333;
      border-bottom-left-radius: 4px;
    }
    .chat-input-container {
      display: flex;
      padding: 10px;
      border-top: 1px solid #e0e0e0;
      background-color: white;
    }
    .chat-input {
      flex: 1;
      border: none;
      border-radius: 20px;
      padding: 12px 15px;
      font-size: 16px;
      background-color: #f0f0f0;
      outline: none;
      resize: none;
      overflow-y: auto;
      max-height: 100px;
      min-height: 20px;
    }
    .send-button {
      background-color: #4a6ee0;
      color: white;
      border: none;
      border-radius: 50%;
      width: 40px;
      height: 40px;
      margin-left: 8px;
      cursor: pointer;
      display: flex;
      justify-content: center;
      align-items: center;
      font-size: 18px;
      transition: background-color 0.2s;
    }
    .send-button:hover {
      background-color: #3a5ecc;
    }
    .send-button:disabled {
      background-color: #cccccc;
      cursor: not-allowed;
    }
    .message-time {
      font-size: 11px;
      margin-top: 5px;
      opacity: 0.7;
      text-align: right;
    }
  </style>
    </head>
    <body></body>
    <script>


//------------------------------------//
// Initialize jsPsych
//------------------------------------//
var jsPsych = initJsPsych({
    on_finish: function() {
    }
})


//------------------------------------//
// Initialize jsPsych Timeline
//------------------------------------//
var timeline = [];



//------------------------------------//
// Hello World Trial
//------------------------------------//
var trial = {
    type: jsPsychMessageHandlerPlugin,
    stimulus: function () {
    var html = `<div class="chat-container"</div>` +
        `<div class="chat-header"</div>` +
        `<div class="chat-messages"</div>` +
        `<div class="message"</div>` +
        `<div class="user-message"</div>` +
        `<div class="reply-message"</div>` +
        `<div class="chat-input-container"</div>` +
        `<div class="chat-input"</div>` +

        `<textarea class="chat-input" id="chat-input" placeholder="Type a message..." rows="1"></textarea>` +

        `<div class="send-button"</div>` +
        `<div class="send-button:hover"</div>`

    return html;
    }
}


timeline.push(trial);

// var html = `
//             <p style="color: #FFFFFF; font-size: 3vw; text-align: center;"><b>Loading...</b></p>
//             <div class="progress-container" style="height: 60px; width: 500px; background-color: #222; border-radius: 10px; box-shadow: 0 0 20px rgba(0, 191, 255, 0.5);">
//             <div id="progress-bar" style="height: 100%; width: 0%; background: linear-gradient(90deg, #00BFFF, #00FFFF); box-shadow: 0 0 10px rgba(0, 255, 255, 0.8); border-radius: 8px; transition: width 9s linear;">
//             </div>`;
//         return html;




//------------------------------------//
// Run the experiment
//------------------------------------//
jsPsych.run(timeline);

</script>
</html>